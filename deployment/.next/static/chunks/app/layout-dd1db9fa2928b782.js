(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1143:(e,t,n)=>{"use strict";n.d(t,{b:()=>a,u:()=>r});var o=n(8081),l=n(2149);let c=(0,l.createContext)(void 0),a=()=>{let e=(0,l.useContext)(c);if(!e)throw Error("usePetra must be used within a PetraProvider");return e},r=e=>{let{children:t}=e,[n,a]=(0,l.useState)(!1),[r,s]=(0,l.useState)(null),[i,d]=(0,l.useState)(null),[u,w]=(0,l.useState)(!1),[m,h]=(0,l.useState)("disconnected"),P=async()=>{try{if(h("connecting"),window.aptos){let e=window.aptos;console.log("Attempting to connect to Petra wallet...");let t=await e.connect();console.log("Petra connection response:",t);let n=await e.account();if(console.log("Petra account:",n),n&&n.address)a(!0),s(n.address),d(n.publicKey?"mainnet":"testnet"),h("connected"),console.log("Successfully connected to Petra wallet:",n.address);else throw Error("No account information received")}else console.log("Petra wallet not detected"),h("error"),alert("Petra Wallet kh\xf4ng được t\xecm thấy. Vui l\xf2ng c\xe0i đặt Petra Wallet extension v\xe0 thử lại.")}catch(e){console.error("Failed to connect to Petra:",e),h("error"),alert("Kh\xf4ng thể kết nối với Petra Wallet. Vui l\xf2ng kiểm tra extension v\xe0 thử lại.")}},v=async e=>{try{if(window.aptos){let t=window.aptos,n=await t.signAndSubmitTransaction(e);return console.log("Transaction response:",n),n}throw Error("Petra wallet not available")}catch(e){throw console.error("Transaction failed:",e),e}};return(0,l.useEffect)(()=>{{let e=()=>{let e=!!window.aptos;w(e),e?(console.log("Petra wallet detected"),(async()=>{try{let e=window.aptos,t=await e.account();t&&t.address&&(a(!0),s(t.address),d(t.publicKey?"mainnet":"testnet"),h("connected"),console.log("Already connected to Petra wallet:",t.address))}catch(e){console.log("Not connected to Petra wallet"),h("disconnected")}})()):(console.log("Petra wallet not detected"),h("disconnected"))};return e(),window.addEventListener("load",e),()=>{window.removeEventListener("load",e)}}},[]),(0,o.jsx)(c.Provider,{value:{connected:n,address:r,network:i,signAndSubmitTransaction:v,connect:P,disconnect:()=>{try{window.aptos&&window.aptos.disconnect()}catch(e){console.error("Failed to disconnect from Petra:",e)}finally{a(!1),s(null),d(null),h("disconnected")}},isPetraAvailable:u,connectionStatus:m},children:t})}},4905:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},5647:(e,t,n)=>{Promise.resolve().then(n.bind(n,6832)),Promise.resolve().then(n.t.bind(n,4905,23)),Promise.resolve().then(n.t.bind(n,6146,23))},6146:()=>{},6832:(e,t,n)=>{"use strict";n.d(t,{MultiWalletProvider:()=>w,E:()=>d});var o=n(8081),l=n(2149),c=n(1143);let a=(0,l.createContext)(void 0),r=()=>{let e=(0,l.useContext)(a);if(!e)throw Error("usePontem must be used within a PontemProvider");return e},s=e=>{let{children:t}=e,[n,c]=(0,l.useState)(!1),[r,s]=(0,l.useState)(null),[i,d]=(0,l.useState)(null),[u,w]=(0,l.useState)(!1),[m,h]=(0,l.useState)("disconnected");function P(){return window.pontem?window.pontem:window.Pontem?window.Pontem:window.aptos&&window.aptos.isPontem?window.aptos:null}let v=async()=>{try{h("connecting");let e=P();if(e){let t;console.log("Attempting to connect to Pontem wallet...",e);let n=await e.connect();console.log("Pontem connection response:",n);try{t=await e.account()}catch(n){try{t=await e.getAccount()}catch(n){t=e.account||e.address||null}}if(console.log("Pontem account:",t),t&&(t.address||"string"==typeof t))c(!0),s(t.address||t),d(t.publicKey?"mainnet":"testnet"),h("connected"),console.log("Successfully connected to Pontem wallet:",t.address||t);else throw Error("No account information received")}else console.log("Pontem wallet not detected"),h("error"),alert("Pontem Wallet kh\xf4ng được t\xecm thấy. Vui l\xf2ng c\xe0i đặt Pontem Wallet extension v\xe0 thử lại.")}catch(e){console.error("Failed to connect to Pontem:",e),h("error"),alert("Kh\xf4ng thể kết nối với Pontem Wallet. Vui l\xf2ng kiểm tra extension v\xe0 thử lại.")}},g=async e=>{try{let t=P();if(t){let n;try{n=await t.signAndSubmitTransaction(e)}catch(o){n=await t.signTransaction(e)}return console.log("Transaction response:",n),n}throw Error("Pontem wallet not available")}catch(e){throw console.error("Transaction failed:",e),e}};return(0,l.useEffect)(()=>{{let e=()=>{let e=P(),t=!!e;w(t),t?(console.log("Pontem wallet detected",e),(async()=>{try{let t;try{t=await e.account()}catch(n){try{t=await e.getAccount()}catch(n){t=e.account||e.address||null}}t&&(t.address||"string"==typeof t)&&(c(!0),s(t.address||t),d(t.publicKey?"mainnet":"testnet"),h("connected"),console.log("Already connected to Pontem wallet:",t.address||t))}catch(e){console.log("Not connected to Pontem wallet"),h("disconnected")}})()):(console.log("Pontem wallet not detected"),h("disconnected"))};return e(),window.addEventListener("load",e),()=>{window.removeEventListener("load",e)}}},[]),(0,o.jsx)(a.Provider,{value:{connected:n,address:r,network:i,signAndSubmitTransaction:g,connect:v,disconnect:()=>{try{let e=P();e&&"function"==typeof e.disconnect&&e.disconnect()}catch(e){console.error("Failed to disconnect from Pontem:",e)}finally{c(!1),s(null),d(null),h("disconnected")}},isPontemAvailable:u,connectionStatus:m},children:t})},i=(0,l.createContext)(void 0),d=()=>{let e=(0,l.useContext)(i);if(!e)throw Error("useMultiWallet must be used within a MultiWalletProvider");return e},u=e=>{let{children:t}=e,[n,a]=(0,l.useState)(null),[s,d]=(0,l.useState)([]),[u,w]=(0,l.useState)("disconnected"),m=(0,c.b)(),h=r();(0,l.useEffect)(()=>{let e=[];m.isPetraAvailable&&e.push("petra"),h.isPontemAvailable&&e.push("pontem"),d(e)},[m.isPetraAvailable,h.isPontemAvailable]);let P=(()=>{switch(n){case"petra":return m;case"pontem":return h;default:return null}})(),v=async e=>{if(e){w("connecting"),a(e);try{switch(e){case"petra":await m.connect();break;case"pontem":await h.connect()}w("connected")}catch(t){console.error("Failed to connect to ".concat(e,":"),t),w("error"),a(null)}}};(0,l.useEffect)(()=>{P?w(P.connectionStatus):w("disconnected")},[null==P?void 0:P.connectionStatus]);let g={activeWallet:n,setActiveWallet:a,connected:(null==P?void 0:P.connected)||!1,address:(null==P?void 0:P.address)||null,network:(null==P?void 0:P.network)||null,signAndSubmitTransaction:(null==P?void 0:P.signAndSubmitTransaction)||(async()=>{throw Error("No wallet connected")}),connect:v,disconnect:()=>{P&&P.disconnect(),a(null),w("disconnected")},availableWallets:s,connectionStatus:u};return(0,o.jsx)(i.Provider,{value:g,children:t})},w=e=>{let{children:t}=e;return(0,o.jsx)(c.u,{children:(0,o.jsx)(s,{children:(0,o.jsx)(u,{children:t})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[206,979,497,954,358],()=>t(5647)),_N_E=e.O()}]);